You are preparing an already working project called "Namma Ooru Vandi"
to be deployed on Vercel.

IMPORTANT:
- Do NOT change any existing features or logic.
- Do NOT refactor GPS, ESP, demo mode, or routing.
- Do NOT remove or redesign UI.
- Do NOT introduce databases or new dependencies.
- ONLY add what is required for Vercel compatibility.

---------------------------------
PRIMARY GOAL
---------------------------------
Make the project deployable on Vercel
while preserving 100% of current behavior.

---------------------------------
SERVER ADAPTATION (MANDATORY)
---------------------------------

1. EXPRESS â†’ VERCEL COMPATIBILITY
- Adapt the existing Express server to work as a Vercel Serverless Function.
- Do NOT rewrite routes.
- Export the Express app properly so Vercel can invoke it.

2. REMOVE HARD-CODED SERVER LISTEN
- Do NOT call app.listen or httpServer.listen in production.
- Ensure local development continues to work exactly the same.

---------------------------------
BUILD & OUTPUT CONFIG
---------------------------------

3. VERCEL CONFIG FILE
- Add a `vercel.json` file.
- Configure it to:
  - Route all requests to the server entry
  - Serve the frontend correctly
  - Support client-side routing

4. FRONTEND BUILD SUPPORT
- Ensure Vite build output is compatible with Vercel static serving.
- Do NOT change frontend structure or files.

---------------------------------
ENVIRONMENT HANDLING
---------------------------------

5. ENVIRONMENT VARIABLES
- Ensure PORT is NOT required in production.
- Use process.env.NODE_ENV correctly.
- Local `.env` behavior must remain unchanged.

---------------------------------
ROUTING RULES
---------------------------------

6. ROUTE HANDLING
- Ensure:
  - `/api/*` routes continue to work
  - frontend routes work on refresh (SPA behavior)
- No 404s on reload.

---------------------------------
QUALITY RULES
---------------------------------

- Keep changes minimal and isolated.
- Comment clearly where Vercel-specific logic is added.
- Do NOT introduce platform-specific hacks.
- App must continue to run locally using `npm run dev`.

---------------------------------
FINAL VALIDATION
---------------------------------

After changes:
- Local dev must still work.
- Project must build successfully.
- Vercel deployment must work without runtime errors.

Do NOT optimize or redesign anything.
Only make the app Vercel-ready.
